{"ast":null,"code":"import _objectSpread from\"C:/Users/AK/OneDrive/Attachments/Desktop/CRM/flow-crm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import api from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddInvoice=()=>{const navigate=useNavigate();const[customers,setCustomers]=useState([]);const[form,setForm]=useState({customer:\"\",amount:\"\",description:\"\",status:\"Pending\"});const[loadingCustomers,setLoadingCustomers]=useState(true);const[saving,setSaving]=useState(false);useEffect(()=>{const loadCustomers=async()=>{try{var _ref,_res$data$items;const res=await api.get(\"/customers\");setCustomers((_ref=(_res$data$items=res.data.items)!==null&&_res$data$items!==void 0?_res$data$items:res.data)!==null&&_ref!==void 0?_ref:[]);}catch(err){console.error(err);alert(\"Could not load customers\");}finally{setLoadingCustomers(false);}};loadCustomers();},[]);const handleChange=e=>setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[e.target.name]:e.target.value}));const handleSubmit=async e=>{e.preventDefault();if(!form.customer)return alert(\"Select a Customer\");if(!form.amount||Number(form.amount)<=0)return alert(\"Enter valid amount\");setSaving(true);try{await api.post(\"/invoices\",_objectSpread(_objectSpread({},form),{},{amount:Number(form.amount),description:form.description||\"General Invoice\"}));alert(\"Invoice created\");navigate(\"/invoices\");}catch(err){var _err$response,_err$response$data;console.error(err);alert(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||\"Could not create invoice\");}finally{setSaving(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto mt-10 bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6 text-gray-800\",children:\"Add Invoice\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[loadingCustomers?/*#__PURE__*/_jsx(\"p\",{children:\"Loading customers...\"}):/*#__PURE__*/_jsxs(\"select\",{name:\"customer\",value:form.customer,onChange:handleChange,className:\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select Customer --\"}),customers.map(c=>{var _c$company;return/*#__PURE__*/_jsxs(\"option\",{value:c._id,children:[c.name,\" \\u2014 \",(_c$company=c.company)!==null&&_c$company!==void 0?_c$company:\"\"]},c._id);})]}),/*#__PURE__*/_jsx(\"input\",{name:\"amount\",type:\"number\",step:\"0.01\",placeholder:\"Amount\",value:form.amount,onChange:handleChange,className:\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"description\",placeholder:\"Description (optional)\",value:form.description,onChange:handleChange,className:\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:form.status,onChange:handleChange,className:\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Paid\",children:\"Paid\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Cancelled\",children:\"Cancelled\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:saving,className:\"w-full p-3 rounded-lg bg-green-600 text-white font-semibold hover:bg-green-700 transition\",children:saving?\"Saving...\":\"Create Invoice\"})]})]});};export default AddInvoice;","map":{"version":3,"names":["useEffect","useState","useNavigate","api","jsx","_jsx","jsxs","_jsxs","AddInvoice","navigate","customers","setCustomers","form","setForm","customer","amount","description","status","loadingCustomers","setLoadingCustomers","saving","setSaving","loadCustomers","_ref","_res$data$items","res","get","data","items","err","console","error","alert","handleChange","e","prev","_objectSpread","target","name","value","handleSubmit","preventDefault","Number","post","_err$response","_err$response$data","response","className","children","onSubmit","onChange","required","map","c","_c$company","_id","company","type","step","placeholder","disabled"],"sources":["C:/Users/AK/OneDrive/Attachments/Desktop/CRM/flow-crm/frontend/src/Pages/AddInvoices.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport api from \"../api\";\r\n\r\nconst AddInvoice = () => {\r\n  const navigate = useNavigate();\r\n  const [customers, setCustomers] = useState([]);\r\n  const [form, setForm] = useState({\r\n    customer: \"\",\r\n    amount: \"\",\r\n    description: \"\",\r\n    status: \"Pending\",\r\n  });\r\n  const [loadingCustomers, setLoadingCustomers] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const loadCustomers = async () => {\r\n      try {\r\n        const res = await api.get(\"/customers\");\r\n        setCustomers(res.data.items ?? res.data ?? []);\r\n      } catch (err) {\r\n        console.error(err);\r\n        alert(\"Could not load customers\");\r\n      } finally {\r\n        setLoadingCustomers(false);\r\n      }\r\n    };\r\n    loadCustomers();\r\n  }, []);\r\n\r\n  const handleChange = (e) =>\r\n    setForm((prev) => ({ ...prev, [e.target.name]: e.target.value }));\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!form.customer) return alert(\"Select a Customer\");\r\n    if (!form.amount || Number(form.amount) <= 0)\r\n      return alert(\"Enter valid amount\");\r\n\r\n    setSaving(true);\r\n    try {\r\n      await api.post(\"/invoices\", {\r\n        ...form,\r\n        amount: Number(form.amount),\r\n        description: form.description || \"General Invoice\",\r\n      });\r\n      alert(\"Invoice created\");\r\n      navigate(\"/invoices\");\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(err.response?.data?.error || \"Could not create invoice\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-md mx-auto mt-10 bg-white p-8 rounded-2xl shadow-lg\">\r\n      <h2 className=\"text-2xl font-bold mb-6 text-gray-800\">Add Invoice</h2>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        {loadingCustomers ? (\r\n          <p>Loading customers...</p>\r\n        ) : (\r\n          <select\r\n            name=\"customer\"\r\n            value={form.customer}\r\n            onChange={handleChange}\r\n            className=\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\"\r\n            required\r\n          >\r\n            <option value=\"\">-- Select Customer --</option>\r\n            {customers.map((c) => (\r\n              <option key={c._id} value={c._id}>\r\n                {c.name} â€” {c.company ?? \"\"}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        )}\r\n\r\n        <input\r\n          name=\"amount\"\r\n          type=\"number\"\r\n          step=\"0.01\"\r\n          placeholder=\"Amount\"\r\n          value={form.amount}\r\n          onChange={handleChange}\r\n          className=\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\"\r\n          required\r\n        />\r\n\r\n        <input\r\n          name=\"description\"\r\n          placeholder=\"Description (optional)\"\r\n          value={form.description}\r\n          onChange={handleChange}\r\n          className=\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\"\r\n        />\r\n\r\n        <select\r\n          name=\"status\"\r\n          value={form.status}\r\n          onChange={handleChange}\r\n          className=\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\"\r\n          required\r\n        >\r\n          <option value=\"Pending\">Pending</option>\r\n          <option value=\"Paid\">Paid</option>\r\n          <option value=\"Cancelled\">Cancelled</option>\r\n        </select>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={saving}\r\n          className=\"w-full p-3 rounded-lg bg-green-600 text-white font-semibold hover:bg-green-700 transition\"\r\n        >\r\n          {saving ? \"Saving...\" : \"Create Invoice\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddInvoice;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}