{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import Sidebar from\"../Components/Sidebar\";import Navbar from\"../Components/Navbar\";import api from\"../api\";import{Edit,Trash2}from\"lucide-react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Customers=()=>{const navigate=useNavigate();const[customers,setCustomers]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchCustomers=async()=>{try{var _ref,_res$data$items;const res=await api.get(\"/customers\");const items=(_ref=(_res$data$items=res.data.items)!==null&&_res$data$items!==void 0?_res$data$items:res.data)!==null&&_ref!==void 0?_ref:[];setCustomers(items);}catch(err){var _err$response;console.error(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||err.message);alert(\"Could not load customers\");}finally{setLoading(false);}};fetchCustomers();},[]);const handleDelete=async id=>{const ok=window.confirm(\"Delete this customer? This cannot be undone.\");if(!ok)return;try{await api.delete(\"/customers/\".concat(id));setCustomers(prev=>prev.filter(c=>c._id!==id));}catch(err){var _err$response2;console.error(((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.data)||err.message);alert(\"Delete Failed\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"main\",{className:\"p-6 overflow-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-800\",children:\"Customers\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/customers/add\"),className:\"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-indigo-600 hover:to-blue-700 text-white font-semibold px-4 py-2 rounded-full shadow-lg transform hover:scale-105 transition\",children:\"Add Customer\"})]}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Loading Customers...\"}):customers.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No Customers Found.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-auto rounded-lg shadow border border-gray-200\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Company\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:customers.map((cust,idx)=>/*#__PURE__*/_jsxs(\"tr\",{className:idx%2===0?\"bg-white\":\"bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-gray-800\",children:cust.name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-gray-600\",children:cust.email}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-gray-600\",children:cust.phone}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-gray-600\",children:cust.company}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/customers/edit/\".concat(cust._id)),className:\"bg-yellow-400 hover:bg-yellow-500 text-gray-800 px-3 py-1 rounded flex items-center justify-center transition shadow\",title:\"Edit Customer\",children:/*#__PURE__*/_jsx(Edit,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(cust._id),className:\"flex items-center justify-center gap-1 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-3 py-1 rounded-full shadow-md transform hover:scale-105 transition\",title:\"Delete Customer\",children:/*#__PURE__*/_jsx(Trash2,{size:16})})]})]},cust._id))})]})})]})]})]});};export default Customers;","map":{"version":3,"names":["useEffect","useState","useNavigate","Sidebar","Navbar","api","Edit","Trash2","jsx","_jsx","jsxs","_jsxs","Customers","navigate","customers","setCustomers","loading","setLoading","fetchCustomers","_ref","_res$data$items","res","get","items","data","err","_err$response","console","error","response","message","alert","handleDelete","id","ok","window","confirm","delete","concat","prev","filter","c","_id","_err$response2","className","children","onClick","length","map","cust","idx","name","email","phone","company","title","size"],"sources":["C:/Users/AK/OneDrive/Attachments/Desktop/CRM/flow-crm/frontend/src/Pages/Customer.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Sidebar from \"../Components/Sidebar\";\r\nimport Navbar from \"../Components/Navbar\";\r\nimport api from \"../api\";\r\nimport { Edit, Trash2 } from \"lucide-react\";\r\n\r\nconst Customers = () => {\r\n  const navigate = useNavigate();\r\n  const [customers, setCustomers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchCustomers = async () => {\r\n      try {\r\n        const res = await api.get(\"/customers\");\r\n        const items = res.data.items ?? res.data ?? [];\r\n        setCustomers(items);\r\n      } catch (err) {\r\n        console.error(err.response?.data || err.message);\r\n        alert(\"Could not load customers\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchCustomers();\r\n  }, []);\r\n\r\n  const handleDelete = async (id) => {\r\n    const ok = window.confirm(\"Delete this customer? This cannot be undone.\");\r\n    if (!ok) return;\r\n\r\n    try {\r\n      await api.delete(`/customers/${id}`);\r\n      setCustomers((prev) => prev.filter((c) => c._id !== id));\r\n    } catch (err) {\r\n      console.error(err.response?.data || err.message);\r\n      alert(\"Delete Failed\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-100\">\r\n      <Sidebar />\r\n      <div className=\"flex-1 flex flex-col\">\r\n        <Navbar />\r\n        <main className=\"p-6 overflow-auto\">\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <h1 className=\"text-2xl font-bold text-gray-800\">Customers</h1>\r\n            <button\r\n              onClick={() => navigate(\"/customers/add\")}\r\n              className=\"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-indigo-600 hover:to-blue-700 text-white font-semibold px-4 py-2 rounded-full shadow-lg transform hover:scale-105 transition\"\r\n            >\r\n              Add Customer\r\n            </button>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <p className=\"text-gray-500\">Loading Customers...</p>\r\n          ) : customers.length === 0 ? (\r\n            <p className=\"text-gray-500\">No Customers Found.</p>\r\n          ) : (\r\n            <div className=\"overflow-auto rounded-lg shadow border border-gray-200\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Name</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Email</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Phone</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Company</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {customers.map((cust, idx) => (\r\n                    <tr key={cust._id} className={idx % 2 === 0 ? \"bg-white\" : \"bg-gray-50\"}>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-gray-800\">{cust.name}</td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-gray-600\">{cust.email}</td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-gray-600\">{cust.phone}</td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-gray-600\">{cust.company}</td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap flex gap-2\">\r\n                        <button\r\n                          onClick={() => navigate(`/customers/edit/${cust._id}`)}\r\n                          className=\"bg-yellow-400 hover:bg-yellow-500 text-gray-800 px-3 py-1 rounded flex items-center justify-center transition shadow\"\r\n                          title=\"Edit Customer\"\r\n                        >\r\n                          <Edit size={16} />\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleDelete(cust._id)}\r\n                          className=\"flex items-center justify-center gap-1 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-3 py-1 rounded-full shadow-md transform hover:scale-105 transition\"\r\n                          title=\"Delete Customer\"\r\n                        >\r\n                          <Trash2 size={16} />\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Customers;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}