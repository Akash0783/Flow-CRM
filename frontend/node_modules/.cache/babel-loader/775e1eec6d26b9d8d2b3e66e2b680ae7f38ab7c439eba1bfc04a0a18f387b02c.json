{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import Sidebar from\"../Components/Sidebar\";import Navbar from\"../Components/Navbar\";import api from\"../api\";import{Edit,Trash2}from\"lucide-react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Leads=()=>{const navigate=useNavigate();const[leads,setLeads]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchLeads=async()=>{try{var _ref,_res$data$items;const res=await api.get(\"/leads\");const items=(_ref=(_res$data$items=res.data.items)!==null&&_res$data$items!==void 0?_res$data$items:res.data)!==null&&_ref!==void 0?_ref:[];setLeads(items);}catch(err){var _err$response;console.error(\"Error fetching leads:\",((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||err.message);}finally{setLoading(false);}};fetchLeads();},[]);const handleDelete=async id=>{const ok=window.confirm(\"Delete this lead? This cannot be undone.\");if(!ok)return;try{await api.delete(\"/leads/\".concat(id));setLeads(prev=>prev.filter(lead=>lead._id!==id));}catch(err){var _err$response2;console.error(\"Delete error:\",((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.data)||err.message);alert(\"Delete Failed\");}};const getStatusColor=status=>{switch(status){case\"New\":return\"bg-blue-100 text-blue-800\";case\"In Progress\":return\"bg-yellow-100 text-yellow-800\";case\"Qualified\":return\"bg-purple-100 text-purple-800\";case\"Converted\":return\"bg-green-100 text-green-800\";case\"Lost\":return\"bg-red-100 text-red-800\";default:return\"bg-gray-100 text-gray-800\";}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"main\",{className:\"p-6 overflow-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-800\",children:\"Leads\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/leads/add\"),className:\"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-indigo-600 hover:to-blue-700 text-white font-semibold px-4 py-2 rounded-full shadow-lg transform hover:scale-105 transition\",children:\"Add Lead\"})]}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Loading Leads...\"}):leads.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No Leads found.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-auto rounded-lg shadow border border-gray-200\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:leads.map((lead,idx)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"\".concat(idx%2===0?\"bg-white\":\"bg-gray-50\",\" hover:bg-gray-100 transition\"),children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-gray-800\",children:lead.name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-gray-600\",children:lead.email}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-gray-800\",children:lead.phone}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-semibold \".concat(getStatusColor(lead.status)),children:lead.status})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/leads/edit/\".concat(lead._id)),className:\"bg-yellow-400 hover:bg-yellow-500 text-gray-800 px-3 py-1 rounded flex items-center justify-center transition shadow\",title:\"Edit Lead\",children:/*#__PURE__*/_jsx(Edit,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(lead._id),className:\"flex items-center justify-center gap-1 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-3 py-1 rounded-full shadow-md transform hover:scale-105 transition\",title:\"Delete Lead\",children:/*#__PURE__*/_jsx(Trash2,{size:16})})]})]},lead._id))})]})})]})]})]});};export default Leads;","map":{"version":3,"names":["useEffect","useState","useNavigate","Sidebar","Navbar","api","Edit","Trash2","jsx","_jsx","jsxs","_jsxs","Leads","navigate","leads","setLeads","loading","setLoading","fetchLeads","_ref","_res$data$items","res","get","items","data","err","_err$response","console","error","response","message","handleDelete","id","ok","window","confirm","delete","concat","prev","filter","lead","_id","_err$response2","alert","getStatusColor","status","className","children","onClick","length","map","idx","name","email","phone","title","size"],"sources":["C:/Users/AK/OneDrive/Attachments/Desktop/CRM/flow-crm/frontend/src/Pages/Leads.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Sidebar from \"../Components/Sidebar\";\r\nimport Navbar from \"../Components/Navbar\";\r\nimport api from \"../api\";\r\nimport { Edit, Trash2 } from \"lucide-react\";\r\n\r\nconst Leads = () => {\r\n  const navigate = useNavigate();\r\n  const [leads, setLeads] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchLeads = async () => {\r\n      try {\r\n        const res = await api.get(\"/leads\");\r\n        const items = res.data.items ?? res.data ?? [];\r\n        setLeads(items);\r\n      } catch (err) {\r\n        console.error(\"Error fetching leads:\", err.response?.data || err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchLeads();\r\n  }, []);\r\n\r\n  const handleDelete = async (id) => {\r\n    const ok = window.confirm(\"Delete this lead? This cannot be undone.\");\r\n    if (!ok) return;\r\n\r\n    try {\r\n      await api.delete(`/leads/${id}`);\r\n      setLeads((prev) => prev.filter((lead) => lead._id !== id));\r\n    } catch (err) {\r\n      console.error(\"Delete error:\", err.response?.data || err.message);\r\n      alert(\"Delete Failed\");\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case \"New\":\r\n        return \"bg-blue-100 text-blue-800\";\r\n      case \"In Progress\":\r\n        return \"bg-yellow-100 text-yellow-800\";\r\n      case \"Qualified\":\r\n        return \"bg-purple-100 text-purple-800\";\r\n      case \"Converted\":\r\n        return \"bg-green-100 text-green-800\";\r\n      case \"Lost\":\r\n        return \"bg-red-100 text-red-800\";\r\n      default:\r\n        return \"bg-gray-100 text-gray-800\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-100\">\r\n      <Sidebar />\r\n      <div className=\"flex-1 flex flex-col\">\r\n        <Navbar />\r\n        <main className=\"p-6 overflow-auto\">\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <h1 className=\"text-2xl font-bold text-gray-800\">Leads</h1>\r\n            <button\r\n              onClick={() => navigate(\"/leads/add\")}\r\n              className=\"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-indigo-600 hover:to-blue-700 text-white font-semibold px-4 py-2 rounded-full shadow-lg transform hover:scale-105 transition\"\r\n            >\r\n              Add Lead\r\n            </button>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <p className=\"text-gray-500\">Loading Leads...</p>\r\n          ) : leads.length === 0 ? (\r\n            <p className=\"text-gray-500\">No Leads found.</p>\r\n          ) : (\r\n            <div className=\"overflow-auto rounded-lg shadow border border-gray-200\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Name</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Email</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Phone</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\r\n                  </tr>\r\n                </thead>\r\n\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {leads.map((lead, idx) => (\r\n                    <tr\r\n                      key={lead._id}\r\n                      className={`${idx % 2 === 0 ? \"bg-white\" : \"bg-gray-50\"} hover:bg-gray-100 transition`}\r\n                    >\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-gray-800\">{lead.name}</td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-gray-600\">{lead.email}</td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-gray-800\">{lead.phone}</td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <span className={`px-2 py-1 rounded-full text-xs font-semibold ${getStatusColor(lead.status)}`}>\r\n                          {lead.status}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap flex gap-2\">\r\n                        <button\r\n                          onClick={() => navigate(`/leads/edit/${lead._id}`)}\r\n                          className=\"bg-yellow-400 hover:bg-yellow-500 text-gray-800 px-3 py-1 rounded flex items-center justify-center transition shadow\"\r\n                          title=\"Edit Lead\"\r\n                        >\r\n                          <Edit size={16} />\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleDelete(lead._id)}\r\n                          className=\"flex items-center justify-center gap-1 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-3 py-1 rounded-full shadow-md transform hover:scale-105 transition\"\r\n                          title=\"Delete Lead\"\r\n                        >\r\n                          <Trash2 size={16} />\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Leads;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}