{"ast":null,"code":"import _objectSpread from\"C:/Users/AK/OneDrive/Attachments/Desktop/CRM/flow-crm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useState}from\"react\";import{useNavigate,useParams}from\"react-router-dom\";import api from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditCustomer=()=>{const{id}=useParams();const navigate=useNavigate();const[form,setForm]=useState({name:\"\",email:\"\",phone:\"\",company:\"\"});const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);useEffect(()=>{const loadCustomer=async()=>{try{const res=await api.get(\"/customers/\".concat(id));const c=res.data;setForm({name:c.name||\"\",email:c.email||\"\",phone:c.phone||\"\",company:c.company||\"\"});}catch(err){var _err$response;console.error(\"Load Customer error\",((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||err.message);alert(\"Could not load the customer\");navigate(\"/customers\");}finally{setLoading(false);}};loadCustomer();},[id,navigate]);const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setSaving(true);try{await api.put(\"customers/\".concat(id),form);alert(\"Customer Updated Successfully!\");navigate(\"/customers\");}catch(err){var _err$response2;console.error(\"Update error\",((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.data)||err.message);alert(\"Update Failed\");}finally{setSaving(false);}};if(loading)return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-10\",children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto mt-10 bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6 text-gray-800\",children:\"Edit Customer\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:form.name,onChange:handleChange,placeholder:\"Full Name\",className:\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:form.email,onChange:handleChange,placeholder:\"Email\",className:\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"phone\",value:form.phone,onChange:handleChange,placeholder:\"Phone Number\",className:\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"company\",value:form.company,onChange:handleChange,placeholder:\"Company\",className:\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:saving,className:\"w-full p-3 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition\",children:saving?\"Saving...\":\"Save Changes\"})]})]});};export default EditCustomer;","map":{"version":3,"names":["useEffect","useState","useNavigate","useParams","api","jsx","_jsx","jsxs","_jsxs","EditCustomer","id","navigate","form","setForm","name","email","phone","company","loading","setLoading","saving","setSaving","loadCustomer","res","get","concat","c","data","err","_err$response","console","error","response","message","alert","handleChange","e","_objectSpread","target","value","handleSubmit","preventDefault","put","_err$response2","className","children","onSubmit","onChange","placeholder","required","type","disabled"],"sources":["C:/Users/AK/OneDrive/Attachments/Desktop/CRM/flow-crm/frontend/src/Pages/EditCustomer.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport api from \"../api\";\r\n\r\nconst EditCustomer = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [form, setForm] = useState({ name: \"\", email: \"\", phone: \"\", company: \"\" });\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const loadCustomer = async () => {\r\n      try {\r\n        const res = await api.get(`/customers/${id}`);\r\n        const c = res.data;\r\n        setForm({\r\n          name: c.name || \"\",\r\n          email: c.email || \"\",\r\n          phone: c.phone || \"\",\r\n          company: c.company || \"\",\r\n        });\r\n      } catch (err) {\r\n        console.error(\"Load Customer error\", err.response?.data || err.message);\r\n        alert(\"Could not load the customer\");\r\n        navigate(\"/customers\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    loadCustomer();\r\n  }, [id, navigate]);\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setSaving(true);\r\n    try {\r\n      await api.put(`customers/${id}`, form);\r\n      alert(\"Customer Updated Successfully!\");\r\n      navigate(\"/customers\");\r\n    } catch (err) {\r\n      console.error(\"Update error\", err.response?.data || err.message);\r\n      alert(\"Update Failed\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <p className=\"text-center mt-10\">Loading...</p>;\r\n\r\n  return (\r\n    <div className=\"max-w-md mx-auto mt-10 bg-white p-8 rounded-2xl shadow-lg\">\r\n      <h2 className=\"text-2xl font-bold mb-6 text-gray-800\">Edit Customer</h2>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <input\r\n          name=\"name\"\r\n          value={form.name}\r\n          onChange={handleChange}\r\n          placeholder=\"Full Name\"\r\n          className=\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\"\r\n          required\r\n        />\r\n        <input\r\n          name=\"email\"\r\n          value={form.email}\r\n          onChange={handleChange}\r\n          placeholder=\"Email\"\r\n          className=\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\"\r\n          required\r\n        />\r\n        <input\r\n          name=\"phone\"\r\n          value={form.phone}\r\n          onChange={handleChange}\r\n          placeholder=\"Phone Number\"\r\n          className=\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\"\r\n          required\r\n        />\r\n        <input\r\n          name=\"company\"\r\n          value={form.company}\r\n          onChange={handleChange}\r\n          placeholder=\"Company\"\r\n          className=\"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none\"\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          disabled={saving}\r\n          className=\"w-full p-3 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition\"\r\n        >\r\n          {saving ? \"Saving...\" : \"Save Changes\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditCustomer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}